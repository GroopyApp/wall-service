syntax = "proto3";
import "google/protobuf/timestamp.proto";

package wallservice;
option java_package = "app.groopy.protobuf";
option java_outer_classname = "WallServiceProto";

service WallService {
  rpc getWall (GetWallRequest) returns (GetWallResponse) {};
  rpc getTopic (GetTopicRequest) returns (GetTopicResponse) {};
  rpc createTopic (CreateTopicRequest) returns (CreateTopicResponse) {};
  rpc createEvent (CreateEventRequest) returns (CreateEventResponse) {};
  }

message GetWallRequest {
  SearchCriteria criteria = 1;
}

message GetWallResponse {
  repeated Topic topics = 1;
}

message GetTopicRequest {
  string id = 1;
}

message GetTopicResponse {
  Topic topic = 1;
}

message CreateTopicRequest {
  string name = 1;
  string description = 2;
  repeated string categories = 3;
  string language = 4;
}

message CreateTopicResponse {
  Topic topic = 1;
}

message CreateEventRequest {
  string topic_id = 1;
  string description = 2;
  Location location = 3;
  string start_date = 4;
  string end_date = 5;
}

message CreateEventResponse {
  Topic topic = 1;
}

message Topic {
  string id = 1;
  string name = 2;
  string description = 3;
  repeated string categories = 4;
  string language = 5;
  repeated Event events = 6;
  string chat_id = 7;
}

message Event {
  string id = 1;
  string description = 2;
  Location location = 3;
  string start_date = 4;
  string end_date = 5;
  string chat_id = 6;
  int32 participants = 7;
}

message SearchCriteria {
  Location location = 1;
  repeated string languages = 2;
  repeated string hashtags = 3;
}

message Location {
  string location_id = 1;
  float latitude = 2;
  float longitude = 3;
}